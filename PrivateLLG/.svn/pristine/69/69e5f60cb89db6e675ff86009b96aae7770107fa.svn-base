package com.llg.help;

import java.text.DecimalFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import android.content.Context;
import android.util.Log;
import android.view.View;

import com.bjg.lcc.privateproject.R;
import com.lidroid.xutils.BitmapUtils;
import com.llg.privateproject.utils.CommonUtils;

public class MyFormat {
	private static DecimalFormat dt = (DecimalFormat) DecimalFormat
			.getInstance(); // 获得格式化类对象

	/** 保留两位小数的价格 */
	public static String getPriceFormat(String price) {
		dt.applyPattern("0.00");// 设置小数点位数(两位) 余下的会四舍五入
		if (price == null) {
			return "0.00";
			// dt.format(Double.parseDouble(price.toString().trim()));
		}
		return dt.format(Double.parseDouble(price.toString().trim()));

	}

	/** "yyyyMMddHHmmss" */
	public static String getTimeFormat0(Object time) {
		// SimpleDateFormat sdf=new SimpleDateFormat("", null);
		SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMddHHmmss");//

		return sdf.format(time);
	}

	/** "yyyy-MM-dd HH:mm:ss" */
	public static String getTimeFormat(Object time) {
		// SimpleDateFormat sdf=new SimpleDateFormat("", null);
		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");//

		return sdf.format(time);
	}

	/** "yyyy-MM-dd" */
	public static String getTimeFormat1(Object time) {
		// SimpleDateFormat sdf=new SimpleDateFormat("", null);
		SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");
		return df.format(time);
	}

	/** "将时间戳格式化yyyy-MM-dd" */
	public static String getTimeFormat2(Object time) {
		// SimpleDateFormat sdf=new SimpleDateFormat("", null);
		Long mtime = Long.parseLong((String) time);
		Date d = new Date(mtime);
		SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");
		return df.format(mtime);
	}

	/** content 后n位用星号代替 */
	public static String replaceString(String content, int n) {
		String sub = "";
		try {
			sub = content.substring(0, content.length() - n);
			StringBuffer sb = new StringBuffer();
			for (int i = 0; i < n; i++) {
				sb = sb.append("*");
			}
			sub += sb.toString();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return sub;
	}

	/**
	 * 用view显示网址为URL的图片
	 * 
	 * @param:view 用于显示img
	 * @param:imgUrl 图片url
	 * @param: img_width 选择传入图片宽度
	 * @param: img_height 选择传入图片高度
	 * */
	public static void setBitmap(Context context, View view, String imgUrl,
			int img_width, int img_height) {
		if (imgUrl == null) {
			imgUrl = "";
		}
		BitmapUtils bitmapUtils = null;
		if (bitmapUtils == null) {
			bitmapUtils = new BitmapUtils(context,
					CommonUtils.createSDCardDir())
					.configDefaultLoadFailedImage(
							R.drawable.bjg_tupjiazai_jiazaishuabai)
					.configDefaultLoadingImage(R.drawable.defaultpic);
		}
		String httpStart = "";
		String newwid = "";
		String newhei = "";
		String newimgUrl = "";
		if (img_width > 0 && img_height > 0) {
			newwid = "img_" + String.valueOf(img_width) + "x";
			newhei = String.valueOf(img_height) + "/";
		}
		if (!isHttpStart(imgUrl)) {
			httpStart = context.getResources().getString(
					R.string.test_image_server_url);
			newimgUrl = httpStart + newwid + newhei + imgUrl;
		} else {
			httpStart = imgUrl
					.substring(
							0,
							context.getResources()
									.getString(R.string.test_image_server_url)
									.length());
			String imgUrlEnd = imgUrl.substring(context.getResources()
					.getString(R.string.test_image_server_url).length());
			newimgUrl = httpStart + newwid + newhei + imgUrlEnd;
		}
//		 Log.d("my", "newimgUrl:"+newimgUrl);
		// Log.i("tag", newimgUrl + "---显示的-ImageUrl()----");
		bitmapUtils.display(view, newimgUrl);
	}

	/** 判断 url 是否一http开头 是true,否false */
	public static boolean isHttpStart(String url) {
		if (url != null && url.length() > 3
				&& url.subSequence(0, 4).equals("http")) {
			return true;
		}
		return false;
	}

	// 判断手机格式是否正确
	public static boolean isMobileNO(String mobiles) {
		Pattern p = Pattern
				.compile("^((13[0-9])|(15[^4,\\D])|(18[0,5-9]))\\d{8}$");
		Matcher m = p.matcher(mobiles);

		return m.matches();
	}

	// 判断email格式是否正确
	public static boolean isEmail(String email) {
		String str = "^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$";
		Pattern p = Pattern.compile(str);
		Matcher m = p.matcher(email);

		return m.matches();
	}

	// 判断是否全是数字
	public static boolean isNumeric(String str) {
		Pattern pattern = Pattern.compile("[0-9]*");
		Matcher isNum = pattern.matcher(str);
		if (!isNum.matches()) {
			return false;
		}
		return true;
	}

	// 邮编格式验证
	public static boolean isZipNO(String zipString) {
		String str = "^[1-9][0-9]{5}$";
		return Pattern.compile(str).matcher(zipString).matches();
	}

	/** dip转像素 */
	public static int dip2px(Context context, float dpValue) {
		final float scale = context.getResources().getDisplayMetrics().density;
		return (int) (dpValue * scale + 0.5f);
	}

	public static String HEADER_KEY = "X-Requested-With";
	public static String HEADER_VALUE = "XMLHttpRequest";
	public static String NOT_LOGIN = "NOT_LOGIN";
}
